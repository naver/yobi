@(message: String, members: List[ProjectUser], project:Project, roles: List[Role])

@import helper._
@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.render) } 

@memberRole(userRole: String) = {
    @for(role <- roles){
       	<li data-value="@role.id" @if(role.name.equals(userRole)){ data-selected="true" class="active" }><a href="javascript:void(0)">@role.name</a></li>
    }
}

@projectMngMain(message, project) {
@views.html.prjmenu(project, utils.MenuType.PROJECT_SETTING, "")

<div class="bubble-wrap dark-gray wp">
	<div class="inner-bubble">
		<form class="nm" action="@routes.ProjectApp.newMember(project.owner, project.name)" method="post" id="addNewMember">
			<input type="text" class="text uname" id="loginId" name="loginId" 
                   data-provider="typeahead" autocomplete="off"
				   placeholder="@Messages("project.members.addMember")"
				   pattern="^[a-zA-Z0-9-]+([_.][a-zA-Z0-9-]+)*$" title="@Messages("user.wrongloginId.alert")" /><!-- 
         --><button class="ns-btn" type="submit"><i class="ico ico-plus-blue"></i>@Messages("button.add")</button>
		</form>
	</div>

	<ul class="members project">
		@for(member <- members){
            @if( member.user != null){

		<li class="member">
			<a href="@routes.UserApp.userInfo(member.user.loginId)" class="avatar-wrap mid img-rounded pull-left"><!-- 
			 --><img class="media-object" src="@User.findByLoginId(member.user.loginId).avatarUrl" width="64" height="64"></a>
			<div class="m-body">
				<div class="td">
					<p>
						<a href="@routes.UserApp.userInfo(member.user.loginId)">
							<strong class="uname">@member.user.loginId</strong>
						</a>
					</p>
					<p class="name">(@member.user.name)</p>
				</div>
				<div class="td">
					<div class="btn-group" data-name="roleof-@member.user.loginId">
						<button data-toggle="dropdown" class="btn dropdown-toggle bgwhite d-label">@member.role.name</button>
						<button data-toggle="dropdown" class="btn dropdown-toggle bgwhite"><span class="caret"></span></button>
                        @if(!project.isOwner(member.user)) {
						<ul class="dropdown-menu">@memberRole(member.role.name)</ul>
                        }
					</div>
                    @if(!project.isOwner(member.user)) {
					<p class="btns">
						<a href="javascript:void(0)" data-action="delete" data-href="@routes.ProjectApp.deleteMember(project.owner, project.name, member.user.id)" class="n-btn small light-gray"><!-- 
						 --><i class="ico ico-delete-small"></i>@Messages("button.delete")</a> 
						<a href="javascript:void(0)" data-action="apply" data-href="@routes.ProjectApp.editMember(project.owner, project.name, member.user.id)" data-loginId="@member.user.loginId" class="n-btn small orange"><!-- 
						 --><i class="ico ico-apply-small"></i>@Messages("button.apply")</a>
					</p>
                    }
				</div>
			</div>
		</li>
		 
			}
        }
	</ul>
	
	<div id="alertDeletion" class="modal hide">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">Ã—</button>
			<h3>@Messages("project.member.delete")</h3>
		</div>
		<div class="modal-body">
			<p>@Messages("project.member.deleteConfirm")</p>
		</div>
		<div class="modal-footer">
			<a href="#" class="btn" data-dismiss="modal">@Messages("button.no")</a>
			<a href="#" class="btn btn-danger btnDelete">@Messages("button.yes")</a>
		</div>
	</div>
	
</div>

<script type="text/javascript">
   	$(document).ready(function(){
   		$hive.loadModule("project.Member");
   	});
</script>
    
}
